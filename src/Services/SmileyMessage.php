<?php

namespace App\Services;

use Michelf\Markdown;


class SmileyMessage
{
    public function convertSmileyToEmoji(?string $text): string
    {
        if ($text === null) {
            return "";
        }
        $smileyToEmojiMap = [
            'xD' => 'ğŸ˜†',
            'XD' => 'ğŸ˜†',
            'x-D' => 'ğŸ˜†',
            'X-D' => 'ğŸ˜†',
            ':-)' => 'ğŸ™‚',
            ':)' => 'ğŸ™‚',
            ':-D' => 'ğŸ˜ƒ',
            ':D' => 'ğŸ˜ƒ',
            ':-(' => 'ğŸ™',
            ':(' => 'ğŸ™',
            ';-)' => 'ğŸ˜‰',
            ';)' => 'ğŸ˜‰',
            ':-P' => 'ğŸ˜›',
            ':P' => 'ğŸ˜›',
            ':-p' => 'ğŸ˜›',
            ':p' => 'ğŸ˜›',
            ':-O' => 'ğŸ˜®',
            ':O' => 'ğŸ˜®',
            ':-o' => 'ğŸ˜®',
            ':o' => 'ğŸ˜®',
            ':-*' => 'ğŸ˜˜',
            ':*' => 'ğŸ˜˜',
            '<3' => 'â¤ï¸',
            ':/' => 'ğŸ˜•',
            ':-/' => 'ğŸ˜•',
            ':|' => 'ğŸ˜',
            ':-|' => 'ğŸ˜',
            ':X' => 'ğŸ¤',
            ':-X' => 'ğŸ¤',
            'B-)' => 'ğŸ˜',
            '8-)' => 'ğŸ˜',
            ':-$' => 'ğŸ¤‘',
            ':$' => 'ğŸ¤‘',
            ':\'(' => 'ğŸ˜¢',
            ':-[' => 'ğŸ§›',
            ':[' => 'ğŸ§›',
            ':-]' => 'ğŸ˜',
            ':]' => 'ğŸ˜',
            'O:)' => 'ğŸ˜‡',
            'o:)' => 'ğŸ˜‡',
            '>:)' => 'ğŸ˜ˆ',
            '>:(' => 'ğŸ˜ ',
            ':-@' => 'ğŸ˜¡',
            ':@' => 'ğŸ˜¡',
            ':-#' => 'ğŸ¤',
            ':#' => 'ğŸ¤',
            ':-&' => 'ğŸ¤',
            ':&' => 'ğŸ¤',
            ':-S' => 'ğŸ˜–',
            ':S' => 'ğŸ˜–',
            ':-s' => 'ğŸ˜–',
            ':s' => 'ğŸ˜–',
            ':-+' => 'ğŸ¤•',
            ':-Q' => 'ğŸ¤®',
            ':Q' => 'ğŸ¤®',
            ':-q' => 'ğŸ¤®',
            ':q' => 'ğŸ¤®',
            ':_:' => 'ğŸ˜­',
            'T_T' => 'ğŸ˜­',
            ':-J' => 'ğŸ˜',
            ':J' => 'ğŸ˜',
            ':-j' => 'ğŸ˜',
            ':j' => 'ğŸ˜',
            ':D-' => 'ğŸ˜†',
            ':-.' => 'ğŸ˜',
            ':.' => 'ğŸ˜',
            ':-,' => 'ğŸ˜',
            ':,' => 'ğŸ˜',
            ':-<' => 'ğŸ˜’',
            ':<' => 'ğŸ˜’',
            ':->' => 'ğŸ˜',
            ':>' => 'ğŸ˜',
            ':-0' => 'ğŸ˜®',
            ':0' => 'ğŸ˜®',
            ':-()' => 'ğŸ˜®',
            ':-[]' => 'ğŸ˜®',
            ':-{}' => 'ğŸ˜®',
        ];
        $markdownParser = new Markdown();


        return str_replace(array_keys($smileyToEmojiMap), array_values($smileyToEmojiMap), $markdownParser->defaultTransform(nl2br($text)));
    }
}
