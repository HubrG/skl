(self.webpackChunk=self.webpackChunk||[]).push([[143],{4180:(e,t,n)=>{var r={"./hello_controller.js":4695};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=4180},8205:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={"symfony--ux-autocomplete--autocomplete":Promise.resolve().then(n.bind(n,7816)),"symfony--ux-lazy-image--lazy-image":Promise.resolve().then(n.bind(n,5461)),"symfony--ux-turbo--turbo-core":Promise.resolve().then(n.bind(n,2466)),"symfony--ux-turbo--mercure-turbo-stream":Promise.resolve().then(n.bind(n,2961))}},4695:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});n(8304),n(4812),n(489),n(1539),n(1299),n(2419),n(1703),n(6647),n(8011),n(9070),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(s,e);var t,n,r,c=d(s);function s(){return o(this,s),c.apply(this,arguments)}return t=s,(n=[{key:"connect",value:function(){this.element.textContent="Hello Stimulus! Edit me in assets/controllers/hello_controller.js"}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(n(6599).Qr)},3252:(e,t,n)=>{"use strict";var r=n(2192),o=n(6599),i=n(1829),a=n(6613),d=((0,r.x)(n(4180)),o.Mx.start());d.register("notification",i.Z),d.register("datepicker",a.a),window.Noty=n(2854);n(1703),n(6647),n(9070);function c(){if(document.getElementById("keyValue")){var e=document.getElementById("keyValue"),t=document.getElementById("hideId");e.addEventListener("keydown",(function(n){if("Space"===n.code||"KeyM"===n.code||"Comma"===n.code)if(document.getElementById("keyw_"+e.value.toUpperCase()))e.value="";else{var r="/story/add_key/"+t.value+"/"+e.value;axios.post(r).then((function(n){var r;r=document.getElementById("editPage")?"edit":"add";var o=n.data.value,i=document.createElement("div");i.setAttribute("id","keyw_"+o.toUpperCase());var a=document.createTextNode(o);i.appendChild(a),document.getElementById("keyList").appendChild(i),document.getElementById("keyw_"+o.toUpperCase()).innerHTML=o+" &nbsp;<a href='/story/"+r+"/del_key/"+t.value+"/"+o+"'><i class='fa-solid fa-delete-left hover:text-red-400'></i></a>",e.value=""}))}})),e.addEventListener("keyup",(function(t){"Space"===t.code&&(e.value="")}))}}var s,u,l,m;n(9554),n(1539),n(4747),n(8309),n(2564);function f(e,t,n,r){var o=document.getElementById("hideId").value+Math.floor(9999*Math.random()),i="/images/uploads/story/"+document.getElementById("hideId").value+"/",a=new FormData;a.append("name",t),a.append("value",e),a.append("file",n),a.append("filename",o),axios.post(r,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){if(n&&(console.log(i+o+".jpg"),document.getElementById("cover").src=i+o+".jpg",document.getElementById("hideNoCover"))){var t=document.getElementById("hideNoCover"),r=document.getElementById("showNewCover");r.classList.contains("hidden")&&(t.classList.add("hidden"),r.classList.remove("hidden"))}}))}function p(){document.querySelectorAll(".axios").forEach((function(e){var t,n="/story/as/"+document.getElementById("hideId").value;e.addEventListener("change",(function(){var r;r=e.files?e.files[0]:"";var o=document.getElementById("publication_mature");o.checked?o.value=1:o.value=0,clearTimeout(t),f(e.value,e.name,r,n)})),e.addEventListener("keyup",(function(){clearTimeout(t),t=setTimeout((function(){f(e.value,e.name,undefined,n)}),5e3)}))}))}function b(){if(document.getElementById("darkButton")){document.getElementById("darkButton").addEventListener("click",y);var e=document.getElementById("html"),t=document.getElementById("darkMode");e.classList.contains("dark")?t.innerHTML="clair":t.innerHTML="sombre"}}function y(){var e=document.getElementById("html"),t=document.getElementById("html");e.classList.toggle("dark");var n=document.getElementById("darkMode");t.classList.contains("dark")?n.innerHTML="clair":n.innerHTML="sombre"}function g(){if(document.getElementById("PublicationPublishButton")){var e=document.getElementById("PublicationPublishButton");e.addEventListener("click",v);var t=document.getElementById("publishText"),n=document.getElementById("publishButton"),r=document.getElementById("publishDiv"),o=document.getElementById("publishToggle"),i=document.getElementById("publishDateText"),a=document.getElementById("PublicationPublishModalText");n.checked?(a.innerHTML="Êtes-vous certain(e) de vouloir annuler la publication de votre récit ?",r.classList.add("border-red-500","bg-red-100"),t.classList.add("text-red-900"),o.classList.add("peer-checked:bg-red-600"),e.classList.add("bg-red-600","hover:bg-red-800")):(a.innerHTML="Êtes-vous certain(e) de vouloir publier votre récit ?",r.classList.add("bg-green-100","border-green-500"),t.classList.add("text-green-900"),o.classList.add("peer-checked:bg-green-600","bg-green-200"),e.classList.add("bg-green-600","hover:bg-green-800"),i.classList.add("hidden"))}}function v(){var e=document.getElementById("PublicationPublishButton"),t=document.getElementById("publishText"),n=document.getElementById("publishButton"),r=document.getElementById("publishDiv"),o=document.getElementById("publishToggle"),i=document.getElementById("publishDateText"),a=document.getElementById("publishDateTextSpan"),d=document.getElementById("PublicationPublishModalText");n.checked?(n.checked=!1,t.innerHTML="Publier le récit",d.innerHTML="Êtes-vous certain(e) de vouloir publier votre récit ?",o.classList.remove("peer-checked:bg-red-600"),o.classList.add("bg-green-200","peer-checked:bg-green-600"),r.classList.remove("bg-red-100","border-red-500"),r.classList.add("bg-green-100","border-green-500"),t.classList.remove("text-red-900"),t.classList.add("text-green-900"),e.classList.remove("bg-red-600","hover:bg-red-800"),e.classList.add("bg-green-600","hover:bg-green-800"),i.classList.add("hidden")):(n.checked=!0,a.innerHTML="quelques instants",t.innerHTML="Dépublier le récit",d.innerHTML="Êtes-vous certain(e) de vouloir annuler la publication de votre récit ?",r.classList.remove("bg-green-100","border-green-500"),r.classList.add("bg-red-100","border-red-500"),o.classList.remove("peer-checked:bg-green-600"),o.classList.add("peer-checked:bg-red-600"),t.classList.remove("text-green-900"),t.classList.add("text-red-900"),e.classList.remove("bg-green-600","hover:bg-green-800"),e.classList.add("bg-red-600","hover:bg-red-800"),i.classList.remove("hidden"));var c,s,u=document.getElementById("hideId").value,l=new FormData,m=n.checked;l.append("pub",u),l.append("publish",m),axios.post("/story/publish",l,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){c="success",s=1==e.data.value?"Votre récit a bien été dépublié !":"Votre récit a bien été publié !"})).catch((function(e){e.response&&(c="error",s="Une erreur s'est produite, les modifications n'ont pas été enregistrées")})).then((function(e){new Noty({text:s,theme:"semanticui",progressBar:!0,timeout:2500,layout:"bottomCenter",type:c,closeWith:["click","button"],animation:{open:"animate__animated animate__fadeInUp",close:"animate__animated animate__fadeOutDown"}}).show()}))}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}p(),b(),g(),s=document,u="script",l=s.createElement(u),m=s.getElementsByTagName(u)[0],l.src="https://sdk.canva.com/designbutton/v2/api.js",m.parentNode.insertBefore(l,m);var L=E((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),document.addEventListener("turbo:before-cache",(function(){})),document.addEventListener("turbo:render",(function(){c(),p(),b(),g(),function(e,t,n){var r=e.createElement(t),o=e.getElementsByTagName(t)[0];r.src="https://sdk.canva.com/designbutton/v2/api.js",o.parentNode.insertBefore(r,o)}(document,"script")})),document.addEventListener("turbo:visit",(function(){document.body.classList.add("turbo-loading")})),document.addEventListener("turbo:before-render",(function(e){e.detail.newBody.classList.add("turbo-loading")})),document.addEventListener("turbo:render",(function(){requestAnimationFrame((function(){document.body.classList.remove("turbo-loading")}))}))}));new L;n(2880),n(6230);window.axios=n(7218),document.getElementById("keyValue")&&c()}},e=>{e.O(0,[552],(()=>{return t=3252,e(e.s=t);var t}));e.O()}]);