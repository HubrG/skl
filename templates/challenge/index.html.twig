{% extends 'base.html.twig' %}

{% block title %}S'exercer
{% endblock %}
{% block body %}
	<div class="lg:w-9/12 mx-auto">
		<h1 class="text-center font-serif  md:mt-0 mb-5">
			<i class="fa-duotone fa-hand-holding-seedling sexercer" style="--fa-primary-color: #18cd58; --fa-secondary-color: #1e3150; --fa-secondary-opacity: 0.7;"></i>
			<span class="  dark:brightness-[1] font-serif ">S'exercer</span>
		</h1>
		<hr class="my-2 mb-0 mt-8 border-slate-400 dark:border-slate-400 border-2">
		{% if app.user %}
			<a href="{{path("app_challenge_create")}}" class="bg-slate-200 hover:bg-slate-300 dark:bg-slate-500 dark:text-slate-100 dark:hover:bg-slate-600 grayscale-[35%] dark:grayscale-[60%] button-classic opacity-100  button-create-topic sticky md:top-16 top-14">
				<span>
					<i class="fa-regular  fa-plus-square"></i>&nbsp;&nbsp;Proposer un nouvel exercice
				</span>
			</a>
		{% else %}
			<button class="w-full bg-slate-200 hover:bg-slate-300 dark:bg-slate-500 dark:text-slate-100 dark:hover:bg-slate-600 grayscale-[35%] dark:grayscale-[60%] button-classic opacity-100  button-create-topic sticky md:top-16 top-14" data-micromodal-trigger="popup-login">
				<span>
					<i class="fa-regular  fa-plus-square"></i>&nbsp;&nbsp;Proposer un nouvel exercice
				</span>
			</button>
		{% endif %}
		{% if challenges|length == 0 %}
			<h2 class="p-10 text-center text-lg md:w-4/6 w-full mx-auto dark:text-slate-400 text-slate-500 flex flex-col gap-y-2">
				<i class="fa-kit fa-regular-hand-holding-seedling-slash"></i>
				Aucun exercice n'a encore été créé ! Vous avez l'occasion unique d'être la première personne à proposer un exercice à la communauté.
			</h2>
			<hr class="my-5">

		{% else %}
			<div class="flex flex-col  gap-y-5  mt-7">
				{% for item in challenges %}
					<div class="flex flex-row gap-x-3 pl-2 items-center justify-between">
						<div class="flex-shrink-0 w-12 h-12">
							{% if item.user.profilPicture %}
								<img src="{{item.user.profilPicture}}" class="h-full w-full rounded-full self-start" alt="Photo de profil de {{item.user.nickname}}">
							{% else %}
								<div class="rounded-full bg-slate-300 h-full w-full dark:bg-slate-700 flex justify-center items-center text-slate-500 dark:text-slate-300 text-2xl font-semibold">
									{{item.user.nickname|first}}
								</div>
							{% endif %}
						</div>
						<div class="flex flex-col gap-y-0 w-9/12">
							<span>
								<a href="{{path("app_challenge_read", {slug:item.slug, id:item.id})}}" class="hover:underline text-base font-semibold dark:text-slate-300">
									{{item.title}}
								</a>
							</span>
							<p class="flex flex-col items-baseline justify-start gap-x-2">
								<a href="{{path("app_user", {username:item.user.username})}}" class="hover:underline dark:text-slate-500 text-slate-500">
									{{item.user.nickname}}
								</a>
								<span class="text-[0.75rem] text-slate-500 flex md:flex-row flex-col md:justify-between justify-start text-left items-center w-full">
									<span class="self-start order-1">
										Crée il y a
										{{item.createdAt|since}}
									</span>
									<span class="md:self-end self-start order-3 {{item.challengeMessages|length == 0 ? " hidden" }}">
										Dernière réponse il y a
										{% set lastMessage = item.challengeMessages|last %}
										{{lastMessage ? lastMessage.publishedAt|since : item.createdAt|since }}
									</span>
									{% if item.updatedAt %}
										<span class="md:self-center order-2 self-start">
											Modifié il y a
											{{item.updatedAt|since}}
										</span>
									{% endif %}
								</span>
							</p>
						</div>
						<div class="grid grid-cols-3  text-sm items-center gap-x-5">
							<div class="flex flex-col items-center">
								<span class="dark:text-slate-500 text-slate-500">
									<i class="fa-duotone  fa-comment-alt" data-tippy-content="Nombre de réponses"></i>
								</span>
								<span class="dark:text-slate-500 text-slate-500 ">{{item.challengeMessages|length}}</span>
							</div>
						</div>
					</div>
					<hr class="my-2">
				{% endfor %}


			</div>

		{% endif %}

		<p class="text-sm opacity-70 text-center indent-6 italic">Nous vous invitons à explorer le pouvoir libérateur des limites dans l'art. Vous découvrirez comment l'imposition volontaire de règles ou de restrictions peut ouvrir de nouvelles voies à votre créativité.</p>
		<p class="text-sm opacity-70 text-center indent-6 italic mt-5">
			Vous pourriez vous demander comment les restrictions peuvent améliorer votre travail artistique, mais c'est là que réside le paradoxe de la « contrainte libératoire ». En fixant des limites, nous pouvons en fait stimuler notre imagination et créer quelque chose d'unique et de passionnant.</p>
	</div>
</div>{% endblock %}
